<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plaud Recording Downloader</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main class="app">
      <header class="app__header">
        <h1 class="app__title">Audio on this page</h1>
        <div class="app__actions">
          <button id="refresh" class="button">Scan</button>
          <button id="download-all" class="button button--primary">Download all</button>
        </div>
      </header>
      <section id="status" class="status status--info">
        <div class="status__content">
          <span id="status-message">Press Scan to search for audio.</span>
          <div id="job-progress" class="status__progress" hidden>
            <div class="status__progress-bar">
              <div id="job-progress-bar" class="status__progress-bar-fill"></div>
            </div>
            <span id="job-progress-label" class="status__progress-label"></span>
          </div>
        </div>
        <button id="open-dashboard" class="button button--link" hidden>Open Plaud Dashboard</button>
      </section>
      <section id="list" class="list" aria-live="polite"></section>
      <section class="settings" aria-label="Download settings">
        <div class="settings__group">
          <label for="download-subdir" class="settings__label">Save files in</label>
          <div class="settings__path">
            <span class="settings__root">Downloads/</span>
            <input
              id="download-subdir"
              class="settings__input"
              placeholder="plaud-audio"
              autocomplete="off"
            />
          </div>
          <p class="settings__hint">Leave blank to use the default Downloads folder.</p>
        </div>
        <div class="settings__group">
          <label for="post-download-action" class="settings__label">After download</label>
          <select id="post-download-action" class="settings__select">
            <option value="none">Do nothing</option>
            <option value="move">Move to folder</option>
            <option value="trash">Move to trash</option>
          </select>
          <div id="move-target-group" class="settings__tag" hidden>
            <label for="move-tag-id" class="settings__label settings__label--secondary"
              >Destination folder ID</label
            >
            <input
              id="move-tag-id"
              class="settings__input settings__input--tag"
              placeholder="Enter Plaud folder ID"
              autocomplete="off"
            />
            <p class="settings__hint">
              Find the tag ID in Plaudâ€™s folder manager or network calls.
            </p>
          </div>
        </div>
      </section>
    </main>

    <template id="audio-item-template">
      <article class="audio-card">
        <div class="audio-card__meta">
          <h2 class="audio-card__title"></h2>
          <p class="audio-card__context"></p>
        </div>
        <button class="button button--small">Download</button>
      </article>
    </template>

    <script type="module" src="popup.js"></script>
  </body>
</html>
